# Architecture Cache: cc-pick

**Updated**: 2026-01-16

## Claude Code Data Structure (Cached Understanding)

### Directory Layout
```
~/.claude/
├── history.jsonl                    # Session catalog
└── projects/                        # Per-project session data
    └── <url-encoded-project-path>/
        └── <sessionId>.jsonl        # Full session messages
```

### history.jsonl Entry Structure
```json
{
  "display": "user prompt text",
  "pastedContents": {},
  "project": "/full/project/path",
  "timestamp": 1768538242426,
  "sessionId": "73915113-f1f9-4552-aa3f-2a80000cb437"
}
```

### Session JSONL Message Structure
```json
// User/Assistant messages
{
  "type": "user" | "assistant",
  "messageId": "uuid",
  "message": {
    "content": "message text",
    "role": "user" | "assistant"
  },
  "timestamp": 1768538242426
}

// File snapshot
{
  "type": "file-history-snapshot",
  "messageId": "uuid",
  "snapshot": {
    "messageId": "uuid",
    "timestamp": 1768538242426,
    "trackedFileBackups": {}
  }
}
```

## Stats (Current Environment)
- Total history entries: ~2381
- Total projects: ~16+
- Top project: tingly-box (~1261 sessions)

## Key Implementation Notes

1. **Path Encoding**: Project directories are URL-encoded (e.g., `-Users-who-Project-project-cc-pick`)
2. **Message Types**: user, assistant, file-history-snapshot
3. **File Format**: JSONL (one JSON object per line)
4. **Large Files**: Session files can be >100KB, need streaming/pagination
